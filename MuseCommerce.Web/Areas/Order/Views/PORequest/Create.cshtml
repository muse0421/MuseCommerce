@using MuseCommerce.Data.Model
@model PORequest
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section styles {
    @Styles.Render("~/Content/DataTables")
}
<div id="poapp" class="row" ng-app="porequestapp" ng-controller="CreateParentporequestCtrl">
    <div class="col-sm-10" ng-controller="CreateporequestCtrl">
        <div class="wrapper wrapper-content animated fadeInUp">
            <form class="form-horizontal m-t" name="commentForm" novalidate>
                <div class="ibox">
                    <div class="ibox-content">
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">預定單號：</label>
                                    <div class="col-sm-8">
                                        <input id="FBillNo" name="FBillNo" type="text" class="form-control" ng-model="porequest.FBillNo" required="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">地址區號：</label>
                                    <div class="col-sm-8">
                                        <input id="PoAddress.StreetNumber" name="PoAddress.StreetNumber" type="text" class="form-control" ng-model="porequest.PoAddress.StreetNumber" required="" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-sm-4 control-label">说明：</label>
                                    <div class="col-sm-8">
                                        <input id="FNote" name="FNote" type="text" class="form-control"  ng-model="porequest.FNote" required="" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">預定日期：</label>
                                    <div class="col-sm-8">
                                        <input id="FDate" name="FDate" type="text" ng-model="porequest.FDate"
                                                class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">詳細地址：</label>
                                    <div class="col-sm-8">
                                        <input id="PoAddress.StreetName" name="PoAddress.StreetName" type="text" class="form-control" ng-model="porequest.PoAddress.StreetName" required="" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">類型：</label>
                                    <div class="col-sm-8">
                                        <select class="form-control m-b" name="FTranType" ng-model="porequest.FTranType">
                                            <option ng-repeat="x in POTranTypeInfo" value="{{ x.Value }}">{{ x.Text }}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-5 m-b-xs">
                                <button type="button" class="btn btn-success btn-sm" ng-click="open()">
                                    新增材料
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive m-t">
                            <table class="table table-striped table-bordered table-hover dataTables-example">
                                <thead>
                                    <tr>
                                        <th>
                                            名称
                                        </th>
                                        <th>数量</th>
                                        <th>单价</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in porequest.PORequestEntrys">
                                        <td>
                                            <div>
                                                <strong>{{ item.FItem.FName }}</strong>
                                            </div>
                                        </td>
                                        <td><input type="text" class="form-control" ng-model="item.FQty" required="" /></td>
                                        <td><input type="text" class="form-control" ng-model="item.FPrice" required="" /></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>



                        <div class="text-right">

                            <button ng-click="save()" class="btn btn-primary" type="submit"
                                    >
                                提交
                            </button>
                            <button ui-sref="index" class="btn btn-white" type="button">取消</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>


</div>


@section Scripts {
    @Scripts.Render("~/bundles/baseform")
    @Scripts.Render("~/bundles/angular")
    @Scripts.Render("~/bundles/angularui")
    @Scripts.Render("~/bundles/ngbaseform")
    @Scripts.Render("~/bundles/porequest")
}

<script type="text/javascript">

    jQuery(function ($) {
        //var FDate = { elem: "#FDate", format: "YYYY/MM/DD", min: "2016-01-01", max: "2099-06-16", istime: false, istoday: true, issure: false };
        //var end = { elem: "#qedate", format: "YYYY/MM/DD", min: laydate.now(), max: "2099-06-16", istime: true, istoday: false, choose: function (datas) { start.max = datas } };
        //laydate(FDate);
        //laydate(end);
        $(".modal").appendTo("poapp")

        $("#FDate").datepicker({ todayBtn: "linked", keyboardNavigation: !1, forceParse: !1, calendarWeeks: !0, autoclose: !0 })
    });


</script>
